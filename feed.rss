<?xml version="1.0" encoding="UTF-8"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content"><channel><title>Maximilian Götzfried</title><description>Freelance developer for all Apple platforms</description><link>https://mxgzf.github.io</link><language>en</language><lastBuildDate>Fri, 6 Mar 2020 14:54:28 +0100</lastBuildDate><pubDate>Fri, 6 Mar 2020 14:54:28 +0100</pubDate><ttl>250</ttl><atom:link href="https://mxgzf.github.io/feed.rss" rel="self" type="application/rss+xml"/><item><guid isPermaLink="true">https://mxgzf.github.io/posts/2020-03-03-Relaunching-my-website-using-Swift</guid><title>Relaunching my website using Swift</title><description>I recently rebuilt my website using Swift and John Sundell's Publish framework</description><link>https://mxgzf.github.io/posts/2020-03-03-Relaunching-my-website-using-Swift</link><pubDate>Thu, 5 Mar 2020 12:00:00 +0100</pubDate><content:encoded><![CDATA[<p>I recently rebuilt my website using Swift and John Sundell's <a href="https://github.com/JohnSundell/Publish">Publish</a> framework and i can't recommend it enough. It was a lot of fun.</p><p>It's just great to be able to use the familiar <code>DateFormatter</code> to format dates of blog posts. Or to use a <code>forEach</code> loop to create a list of posts that are sorted using a key path:</p><pre><code><span class="keyword">let</span> items = context.<span class="call">allItems</span>(sortedBy: \.<span class="property">date</span>, order: .<span class="dotAccess">descending</span>)
<span class="keyword">return</span> <span class="type">HTML</span>(
    .<span class="call">body</span>(
        .<span class="call">ul</span>(
            .<span class="call">id</span>(<span class="string">"posts"</span>),
            .<span class="call">forEach</span>(items) { item <span class="keyword">in</span>
                .<span class="call">li</span>(
                    .<span class="call">article</span>(
                        .<span class="call">a</span>(.<span class="call">href</span>(item.<span class="property">path</span>), .<span class="dotAccess">text</span>(item.<span class="property">title</span>)),
                        .<span class="call">p</span>(.<span class="call">text</span>(item.<span class="property">description</span>))
                    )
                )
            }
        )
    )
)
</code></pre><h3>Installation and setup</h3><p>After following the <a href="https://github.com/JohnSundell/Publish#installation">instructions</a> you end up with two things:</p><ul><li>A Swift package that generates a static website every time you hit “Run”. Including a sitemap and a RSS feed. It also applies syntax highlighting to your code blocks if you want to, it adds CNAME files if you need to and pushes it to your GitHub pages repo if you wish to.</li><li>And a local HTTP server to test your site</li></ul><p>If you look at <a href="https://github.com/mxgzf/mxgzf.com">my code</a> you see that the final result is pretty straightforward and well organized. I chose a very reduced approach. That's why there are only three Swift files in my package.</p><h3>Adding additional resources</h3><p>Publish requires that resources (images, stylesheets, …) are put in a separate folder <code>Resources</code>, outside of the <code>Content</code> folder:</p><img src="https://mxgzf.github.io/images/Publish-resources-in-a-separate-folder@2x.png" alt="Publish requires that resources are put in a separate folder Resources" style="zoom:50%;" /><p>During the publishing process it copies the resources to the root level of the <code>Output</code> folder:</p><img src="https://mxgzf.github.io/images/Publish-output-folder@2x.png" alt="During the publishing process resources are copied to the root level of the Output folder" style="zoom:50%;" /><p>This is implemented in <code>PublishingStep.copyResources(at:to:includingFolder:)</code>.</p><h3>Adding images to posts when editing</h3><p>I found that <a href="https://typora.io">Typora</a> is the best solution to write new posts, especially when it comes to dealing with images. Typora supports both custom root urls and copying images to custom folders.</p><p>To support Publish's resource structure i add these two lines to the YAML front matter of the markdown document of each post:</p><pre><code>typora-copy-images-to: ../../<span class="type">Resources</span>/images
typora-root-url: ../../<span class="type">Resources</span>
</code></pre><p>So whenever i add an image to a post, for example by drag &amp; drop, it automatically copies the image to the <code>Resources</code> folder of my Publish repository and sets the image url to <code>/images/&lt;filename&gt;</code>. The only requirement is that the markdown document needs to be saved to the <code>posts</code> folder before adding images.</p><p>By the way: These custom metadata fields are ignored during the publishing process because i don't define them in the <code>WebsiteItemMetadata</code> struct of my site definition. So they don't show up in the generated HTML.</p><h3>Flashing the posts list</h3><p>I decided to put the list of blog posts at the end of the index page. I know, this is weird. But at the moment it is more important to present me as a freelancer than list my posts.</p><p>I thought it would be nice to flash the posts list when a visitor follows the link in the description that jumps to that list, similar to what Stack Overflow is doing <a href="https://stackoverflow.com/questions/49726196/swift-3-function-inside-dispatchqueue/49763932#49763932">when linking to answers</a>.</p><p>To do this, i added <code>.id("posts")</code> to the posts list in <code>MyHTMLFactory.makeIndexHTML(for:context:)</code>. Then, to flash the posts list when the anchor is clicked, i added an animation to <code>.posts:target</code> in the CSS:</p><pre><code>#posts:<span class="call">target</span> {
    animation: flash 2s;
}
<span class="keyword">@keyframes</span> <span class="call">flash</span> {
   <span class="call">from</span> { background: <span class="call">rgba</span>(<span class="number">254</span>, <span class="number">255</span>, <span class="number">0</span>, <span class="number">0.40</span>); }
   <span class="call">to</span> { background: transparent; }
}
</code></pre><p>This solution is similar to <a href="https://codepen.io/Founts/pen/mPwbbW">this CodePen</a>.</p><h3>Supporting dark mode</h3><p>To support dark mode i first tell the browser in the stylesheet that my site supports both light and dark mode. It will then redraw the site when the user switches between these modes:</p><pre><code>:<span class="call">root</span> {
    color-scheme: light dark;
}
</code></pre><p>Then, i defined the colors using a <code>@media</code> query:</p><pre><code><span class="keyword">@media</span> (prefers-color-scheme: dark) { … }
</code></pre><h3>Highlighting syntax</h3><p>Publish has a plug-in for John Sundell's <a href="https://github.com/JohnSundell/Splash">Splash</a>, a Swift syntax highlighter that adds colors to your code blocks by adding CSS classes to your HTML:</p><pre><code>&lt;span <span class="keyword">class</span>=<span class="string">"keyword"</span>&gt;<span class="keyword">func</span>&lt;/span&gt; <span class="call">hello</span>(world: &lt;span <span class="keyword">class</span>=<span class="string">"type"</span>&gt;<span class="type">String</span>&lt;/span&gt;) -&gt; &lt;span <span class="keyword">class</span>=<span class="string">"type"</span>&gt;<span class="type">Int</span>&lt;/span&gt;
</code></pre><p>Adding this plugin is pretty simple because you just have to add one line of code to your main <code>publish</code> call:</p><pre><code><span class="keyword">try</span> <span class="type">MySite</span>().<span class="call">publish</span>(
    withTheme: .<span class="dotAccess">myTheme</span>,
    additionalSteps: [],
    plugins: [
        .<span class="call">splash</span>(withClassPrefix: <span class="string">""</span>)
    ]
)
</code></pre><p>For the colors i just use Xcode's default colors:</p><pre><code><span class="comment">/* light colors */</span>
pre code .<span class="call">keyword</span> { color: #9b2393; }
pre code .<span class="call">type</span> { color: #0b4f79; }
pre code .<span class="call">call</span> { color: #326d74; }
pre code .<span class="call">property</span> { color: #326d74; }
pre code .<span class="call">number</span> { color: #1c00cf; }
pre code .<span class="call">string</span> { color: #c41a16; }
pre code .<span class="call">comment</span> { color: #5d6c79; }
pre code .<span class="call">dotAccess</span> { color: #326d74; }
pre code .<span class="call">preprocessing</span> { color: #643820; }

<span class="comment">/* dark colors */</span>
pre code .<span class="call">keyword</span> { color: #fc5fA3; }
pre code .<span class="call">type</span> { color: #5dd8ff; }
pre code .<span class="call">call</span> { color: #67b7a4; }
pre code .<span class="call">property</span> { color: #67b7a4; }
pre code .<span class="call">number</span> { color: #d0bf69; }
pre code .<span class="call">string</span> { color: #fc6a5d; }
pre code .<span class="call">comment</span> { color: #6c7986; }
pre code .<span class="call">dotAccess</span> { color: #67b7a4; }
pre code .<span class="call">preprocessing</span> { color: #fd8f3f; }
</code></pre><h3>The code</h3><p>You can find the Swift package for my website on GitHub at <a href="https://github.com/mxgzf/mxgzf.com">mxgzf/mxgzf.com</a> and the generated website at <a href="https://github.com/mxgzf/mxgzf.github.io">mxgzf/mxgzf.github.io</a>.</p><h3>More</h3><p>Check out the following links if you want to learn more about creating and maintaining websites using Swift and Publish:</p><p><a href="https://github.com/JohnSundell/Publish/pulls?utf8=✓&q=is%3Apr">This list of pull requests</a> gives you a good overview what others contributed to Publish.</p><p>Two plug-ins for Publish:</p><ul><li><a href="https://github.com/SwiftyGuerrero/CNAMEPublishPlugin">CNAMEPublishPlugin</a> generates CNAME files to support custom domain names</li><li><a href="https://github.com/john-mueller/TidyHTMLPublishStep">TidyHTMLPublishStep</a> formats your HTML using <a href="https://github.com/scinfu/SwiftSoup">SwiftSoup</a></li></ul><p>Other sites built with Publish:</p><ul><li><a href="https://github.com/abrampers/personal-site-swift">https://github.com/abrampers/personal-site-swift</a> →<a href="https://abrampers.com">https://abrampers.com</a></li><li><a href="https://github.com/acam002/Blog">https://github.com/acam002/Blog</a> →<a href="https://acam002.github.io">https://acam002.github.io</a></li><li><a href="https://github.com/alvareztech/alvareztech">https://github.com/alvareztech/alvareztech</a> →<a href="https://alvarez.tech">https://alvarez.tech</a></li><li><a href="https://github.com/brorhb/brurberg-dev">https://github.com/brorhb/brurberg-dev</a> →<a href="https://www.brurberg.dev">https://www.brurberg.dev</a></li><li><a href="https://github.com/crelies/christianelies.de">https://github.com/crelies/christianelies.de</a> →<a href="https://christianelies.de">https://christianelies.de</a></li><li><a href="https://github.com/fbernutz/die-himmelstraeumerin-blog">https://github.com/fbernutz/die-himmelstraeumerin-blog</a> →<a href="https://fbernutz.github.io">https://fbernutz.github.io</a></li><li><a href="https://github.com/hggz/hggz.github.io">https://github.com/hggz/hggz.github.io</a> →<a href="https://hggz.github.io">https://hggz.github.io</a></li><li><a href="https://github.com/hngry/hungry.dev">https://github.com/hngry/hungry.dev</a> →<a href="https://hungry.dev">https://hungry.dev</a></li><li><a href="https://github.com/Jimmy-Lee/jimmy-lee">https://github.com/Jimmy-Lee/jimmy-lee</a> →<a href="https://jimmy-lee.github.io">https://jimmy-lee.github.io</a></li><li><a href="https://github.com/leontedev/Publish-leonte.dev">https://github.com/leontedev/Publish-leonte.dev</a> →<a href="https://www.leonte.dev">https://www.leonte.dev</a></li><li><a href="https://github.com/lozhuf/lauriehufford.com">https://github.com/lozhuf/lauriehufford.com</a> →<a href="https://www.lauriehufford.com">https://www.lauriehufford.com</a></li><li><a href="https://github.com/mazo20/personalWebsite">https://github.com/mazo20/personalWebsite</a> →<a href="https://mkowalski.me">https://mkowalski.me</a></li><li><a href="https://github.com/navanchauhan/My-Website-Swift">https://github.com/navanchauhan/My-Website-Swift</a> →<a href="https://navanchauhan.github.io">https://navanchauhan.github.io</a></li><li><a href="https://github.com/ncreated/ncreated.com">https://github.com/ncreated/ncreated.com</a> →<a href="https://ncreated.com">https://ncreated.com</a></li><li><a href="https://github.com/nitesuit/Blog">https://github.com/nitesuit/Blog</a> →<a href="https://www.staskus.io">https://www.staskus.io</a></li><li><a href="https://github.com/peteschaffner/peteschaffner.com">https://github.com/peteschaffner/peteschaffner.com</a> →<a href="https://peteschaffner.com">https://peteschaffner.com</a></li><li><a href="https://github.com/Rubenfer/RubenAppWeb-Project">https://github.com/Rubenfer/RubenAppWeb-Project</a> →<a href="https://ruben.app">https://ruben.app</a></li><li><a href="https://github.com/SwiftyDorado/static-blog">https://github.com/SwiftyDorado/static-blog</a> →<a href="https://swiftydorado.github.io">https://swiftydorado.github.io</a></li><li><a href="https://github.com/TonyStarkLi/Blog">https://github.com/TonyStarkLi/Blog</a> →<a href="https://www.tonystarkli.com">https://www.tonystarkli.com</a></li><li><a href="https://github.com/zorkdev/Website">https://github.com/zorkdev/Website</a> →<a href="https://www.attilanemet.com">https://www.attilanemet.com</a></li></ul>]]></content:encoded></item><item><guid isPermaLink="true">https://mxgzf.github.io/posts/2020-02-29-Working-remotely</guid><title>Working remotely</title><description>A rough sketch from 2016 about working remotely, which i really enjoy</description><link>https://mxgzf.github.io/posts/2020-02-29-Working-remotely</link><pubDate>Sat, 29 Feb 2020 12:00:00 +0100</pubDate><content:encoded><![CDATA[<p>A rough sketch from 2016 about working remotely, which i really enjoy.</p><img src="https://mxgzf.github.io/images/Working%20remotely.png" alt="A rough sketch from 2016 about working remotely"/>]]></content:encoded></item><item><guid isPermaLink="true">https://mxgzf.github.io/posts/2020-02-03-NSApplicationCrashOnExceptions</guid><title>NSApplicationCrashOnExceptions</title><description>A post in the Apple dev forums reminded fellow developers about AppKit's default exception handling</description><link>https://mxgzf.github.io/posts/2020-02-03-NSApplicationCrashOnExceptions</link><pubDate>Mon, 3 Feb 2020 18:00:00 +0100</pubDate><content:encoded><![CDATA[<p>A post in the Apple dev forums reminded fellow developers about AppKit's default exception handling:</p><blockquote><p>“AppKit has a default exception handler that catches all language exceptions raised by code run from its run loop. It logs the exception and then swallows it, allowing the app to continue running. Who thought that was a good idea!?!” – <a href="https://forums.developer.apple.com/thread/128559">https://forums.developer.apple.com/thread/128559</a></p></blockquote><p>The best documentation about the <code>NSApplicationCrashOnExceptions</code> key has Microsoft:</p><blockquote><p>AppKit catches exceptions thrown on the main thread, preventing the application from crashing on macOS, so the SDK cannot catch these crashes. To mimic iOS behavior, set NSApplicationCrashOnExceptions flag before SDK initialization, this will allow the application to crash on uncaught exceptions and the SDK can report them. <code>UserDefaults.standard.register(defaults: ["NSApplicationCrashOnExceptions": true])</code> – <a href="https://docs.microsoft.com/en-us/appcenter/sdk/crashes/macos">https://docs.microsoft.com/en-us/appcenter/sdk/crashes/macos</a></p></blockquote><p>More about this topic:</p><ul><li><a href="https://openradar.appspot.com/41809382">https://openradar.appspot.com/41809382</a></li><li><a href="https://github.com/microsoft/appcenter-sdk-apple/issues/1725">https://github.com/microsoft/appcenter-sdk-apple/issues/1725</a></li><li><a href="https://docs.fabric.io/apple/crashlytics/os-x.html">https://docs.fabric.io/apple/crashlytics/os-x.html</a></li><li><a href="https://siddarthkalra.github.io/2019/04/19/uncaught-exceptions-macos.html">https://siddarthkalra.github.io/2019/04/19/uncaught-exceptions-macos.html</a></li><li><a href="https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/Exceptions/Exceptions.html">https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/Exceptions/Exceptions.html</a></li></ul>]]></content:encoded></item><item><guid isPermaLink="true">https://mxgzf.github.io/posts/2020-02-02-Visualizing-charts-through-audio</guid><title>Visualizing charts through audio</title><description>Audiograph is a great framework that visualizes charts through audio for visually impaired people</description><link>https://mxgzf.github.io/posts/2020-02-02-Visualizing-charts-through-audio</link><pubDate>Sun, 2 Feb 2020 12:00:00 +0100</pubDate><content:encoded><![CDATA[<p><a href="https://github.com/Tantalum73/Audiograph">Audiograph</a> by <a href="https://anerma.de">Andreas Neusüß</a> is a great Swift framework that visualizes charts through audio for visually impaired people. A new feature of iOS 13 that is not available as a public API yet.</p><p>Check the videos in the <a href="https://github.com/Tantalum73/Audiograph">README</a> or <a href="https://twitter.com/Klaarname/status/1223993809413005313">this tweet</a> to see in action.</p><p>(I generally don't embed images or videos in my posts that i don't own)</p>]]></content:encoded></item><item><guid isPermaLink="true">https://mxgzf.github.io/posts/2020-01-09-NSSearchField-bezel-weirdness</guid><title>NSSearchField bezel weirdness</title><description>Setting NSSearchField.isBordered to either true or false after setting the NSSearchField.bezelStyle, the bezel will not be applied properly</description><link>https://mxgzf.github.io/posts/2020-01-09-NSSearchField-bezel-weirdness</link><pubDate>Thu, 9 Jan 2020 12:00:00 +0100</pubDate><content:encoded><![CDATA[<p>Setting <code>NSSearchField.isBordered</code> to either <code>true</code> or <code>false</code> after setting the <code>NSSearchField.bezelStyle</code>, the bezel will <em>not</em> be applied properly. So if you want <code>.bezelStyle = .roundedBezel</code> it is better to not set <code>isBordered</code> at all.</p><p>I think we can file that under "AppKit weirdness".</p><p>And yes, i'm creating the UI of this Mac app programmatically. I've learned my lesson after loosing many hours by merging storyboards, xibs and nibs for several clients in the past decade.</p>]]></content:encoded></item></channel></rss>